language: cpp
sudo: required
dist: trusty
matrix:
  include:
    - addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-5
      env: PLATFORM=device
    - addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise-3.6
          packages:
            - clang-3.6
      env: PLATFORM=simulator

os: linux
env:
- TARGET=app.elf
- TARGET=test.elf
before_install:
- sudo apt-add-repository -y 'deb http://archive.ubuntu.com/ubuntu trusty main universe multiverse restricted'
- sudo apt-get -qq update
- sudo apt-get -y install gcc-arm-none-eabi
script:
- make clean && make $(TARGET)
